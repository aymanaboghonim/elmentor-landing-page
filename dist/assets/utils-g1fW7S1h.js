const g=()=>{document.addEventListener("click",e=>{if(e.target.classList.contains("btn")||e.target.closest(".btn")){const o=e.target.classList.contains("btn")?e.target:e.target.closest(".btn"),t=document.createElement("span");t.className="btn__ripple";const n=o.getBoundingClientRect(),s=Math.max(n.width,n.height),r=e.clientX-n.left-s/2,i=e.clientY-n.top-s/2;t.style.width=t.style.height=s+"px",t.style.left=r+"px",t.style.top=i+"px",o.appendChild(t),setTimeout(()=>{t.remove()},600)}})},y=()=>{if(g(),"IntersectionObserver"in window){const e={threshold:.1,rootMargin:"0px 0px -50px 0px"},o=new IntersectionObserver(t=>{t.forEach(n=>{n.isIntersecting&&(n.target.classList.add("fade-in"),o.unobserve(n.target))})},e);document.querySelectorAll("section").forEach(t=>{o.observe(t)})}},m={FCP:{good:1800,poor:3e3},LCP:{good:2500,poor:4e3},FID:{good:100,poor:300},CLS:{good:.1,poor:.25}};let c={timestamp:Date.now(),url:window.location.href,userAgent:navigator.userAgent,connectionType:navigator.connection?.effectiveType||"unknown",metrics:{},errors:[],warnings:[]};const u=()=>{const e=new PerformanceObserver(r=>{const i=r.getEntries(),a=i[i.length-1];l("FCP",a.startTime,m.FCP)});try{e.observe({entryTypes:["paint"]})}catch(r){console.warn("FCP tracking not supported:",r)}const o=new PerformanceObserver(r=>{const i=r.getEntries(),a=i[i.length-1];l("LCP",a.startTime,m.LCP)});try{o.observe({entryTypes:["largest-contentful-paint"]})}catch(r){console.warn("LCP tracking not supported:",r)}const t=new PerformanceObserver(r=>{r.getEntries().forEach(a=>{l("FID",a.processingStart-a.startTime,m.FID)})});try{t.observe({entryTypes:["first-input"]})}catch(r){console.warn("FID tracking not supported:",r)}let n=0;const s=new PerformanceObserver(r=>{for(const i of r.getEntries())i.hadRecentInput||(n+=i.value,l("CLS",n,m.CLS))});try{s.observe({entryTypes:["layout-shift"]})}catch(r){console.warn("CLS tracking not supported:",r)}},l=(e,o,t)=>{const n=o<=t.good?"good":o<=t.poor?"needs-improvement":"poor";c.metrics[e]={value:Math.round(o*100)/100,score:n,timestamp:Date.now()},n==="poor"&&(console.warn(`🔴 Performance Issue: ${e} = ${o}ms (threshold: ${t.good}ms)`),c.warnings.push({type:"performance",metric:e,value:o,threshold:t.good,timestamp:Date.now()})),window.dispatchEvent(new CustomEvent("performance-metric",{detail:{name:e,value:o,score:n}}))},d=()=>{const e=new PerformanceObserver(o=>{o.getEntries().forEach(n=>{const s=n.initiatorType,r=n.responseEnd-n.requestStart;r>1e3&&(c.warnings.push({type:"slow-resource",url:n.name,resourceType:s,loadTime:r,timestamp:Date.now()}),console.warn(`🐌 Slow Resource: ${s} - ${n.name} (${r}ms)`))})});try{e.observe({entryTypes:["resource"]})}catch(o){console.warn("Resource tracking not supported:",o)}},f=()=>{if(!performance.memory){console.warn("Memory monitoring not supported");return}const e=()=>{const o=performance.memory,t={used:Math.round(o.usedJSHeapSize/1048576),total:Math.round(o.totalJSHeapSize/1048576),limit:Math.round(o.jsHeapSizeLimit/1048576)},n=t.used/t.limit*100;n>80&&(console.warn(`🔴 High Memory Usage: ${n.toFixed(1)}%`),c.warnings.push({type:"high-memory",usage:n,memoryInfo:t,timestamp:Date.now()})),c.memory=t};e(),setInterval(e,3e4)},v=()=>{if(navigator.connection){const e=()=>{c.connection={effectiveType:navigator.connection.effectiveType,downlink:navigator.connection.downlink,rtt:navigator.connection.rtt,saveData:navigator.connection.saveData}};e(),navigator.connection.addEventListener("change",e)}performance.navigation&&(c.navigation={type:performance.navigation.type,redirectCount:performance.navigation.redirectCount})},w=()=>{const e={maxImageSize:102400,maxCSSSize:51200,maxJSSize:256e3},o=performance.getEntriesByType("resource"),t=[];return o.forEach(n=>{const s=n.transferSize||0,r=n.initiatorType;r==="img"&&s>e.maxImageSize?t.push({type:"image-budget-exceeded",url:n.name,size:s,limit:e.maxImageSize}):r==="script"&&s>e.maxJSSize?t.push({type:"js-budget-exceeded",url:n.name,size:s,limit:e.maxJSSize}):r==="link"&&s>e.maxCSSSize&&t.push({type:"css-budget-exceeded",url:n.name,size:s,limit:e.maxCSSSize})}),t.length>0&&(console.warn("📊 Performance Budget Violations:",t),c.budgetViolations=t),t},h=()=>{const e={...c,timestamp:Date.now(),sessionDuration:Date.now()-c.timestamp,budgetViolations:w()},o=Object.values(c.metrics).map(t=>t.score==="good"?100:t.score==="needs-improvement"?50:0);return e.overallScore=o.length>0?Math.round(o.reduce((t,n)=>t+n,0)/o.length):0,e},p=()=>{const e=h(),o={timestamp:new Date().toISOString(),metrics:{fcp:e.metrics.FCP?.value||null,lcp:e.metrics.LCP?.value||null,fid:e.metrics.FID?.value||null,cls:e.metrics.CLS?.value||null},scores:{fcp:e.metrics.FCP?.score||"unknown",lcp:e.metrics.LCP?.score||"unknown",fid:e.metrics.FID?.score||"unknown",cls:e.metrics.CLS?.score||"unknown"},overallScore:e.overallScore,warningCount:e.warnings.length,budgetViolations:e.budgetViolations?.length||0};return localStorage.setItem("elmentor-performance-data",JSON.stringify(o)),o},S=()=>{console.log("🚀 Initializing Performance Monitoring..."),u(),d(),f(),v(),setInterval(p,6e4),window.addEventListener("beforeunload",p),console.log("✅ Performance Monitoring Active")};export{S as a,y as i};
